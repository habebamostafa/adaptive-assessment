<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adaptive Assessment System - Reinforcement Learning</title>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --success: #4cc9f0;
            --danger: #f72585;
            --warning: #fca311;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fb;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
        }
        
        .nav-links li {
            margin-left: 1.5rem;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: opacity 0.3s;
        }
        
        .nav-links a:hover {
            opacity: 0.8;
        }
        
        .btn {
            display: inline-block;
            padding: 0.5rem 1.5rem;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--secondary);
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: white;
        }
        
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .card-title {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            color: var(--primary);
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            background-color: white;
        }
        
        .page {
            display: none;
            padding: 2rem 0;
        }
        
        .active-page {
            display: block;
        }
        
        .assessment-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .question-card {
            margin-bottom: 1.5rem;
        }
        
        .question-text {
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
        }
        
        .options-list {
            list-style: none;
        }
        
        .option-item {
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .option-item:hover {
            background-color: #f0f0f0;
        }
        
        .option-item.selected {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .progress-container {
            margin-bottom: 1.5rem;
        }
        
        .progress-bar {
            height: 10px;
            background-color: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--primary);
            border-radius: 5px;
            transition: width 0.3s;
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .stat-card {
            text-align: center;
            padding: 1.5rem;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        .stat-label {
            color: var(--gray);
        }
        
        .history-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .history-table th,
        .history-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .history-table th {
            background-color: #f8f9fa;
            font-weight: 600;
        }
        
        .track-card {
            text-align: center;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .track-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .track-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary);
        }
        
        .recommendation-card {
            border-left: 4px solid var(--primary);
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .adaptive-indicator {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            padding: 0.5rem;
            background-color: #f8f9fa;
            border-radius: 4px;
        }
        
        .adaptive-badge {
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 0.5rem;
        }
        
        .badge-easy {
            background-color: var(--success);
            color: white;
        }
        
        .badge-medium {
            background-color: var(--warning);
            color: white;
        }
        
        .badge-hard {
            background-color: var(--danger);
            color: white;
        }
        
        .agent-feedback {
            margin-top: 1rem;
            padding: 1rem;
            background-color: #f8f9fa;
            border-radius: 4px;
            border-left: 4px solid var(--primary);
        }
        
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <div class="logo">Adaptive Assessment System</div>
                <ul class="nav-links">
                    <li><a href="#" onclick="showPage('home')">Home</a></li>
                    <li><a href="#" onclick="showPage('assessment')">Assessment</a></li>
                    <li><a href="#" onclick="showPage('history')">History</a></li>
                    <li><a href="#" onclick="showPage('recommendations')">Recommendations</a></li>
                    <li><a href="#" onclick="logout()">Logout</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container">
        <!-- Login Page -->
        <section id="login-page" class="page active-page">
            <div class="card" style="max-width: 500px; margin: 2rem auto;">
                <h2 class="card-title">Login</h2>
                <form id="login-form">
                    <div class="form-group">
                        <label for="login-email" class="form-label">Email</label>
                        <input type="email" id="login-email" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password" class="form-label">Password</label>
                        <input type="password" id="login-password" class="form-control" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
                </form>
                <p style="text-align: center; margin-top: 1rem;">
                    Don't have an account? <a href="#" onclick="showPage('register')">Register</a>
                </p>
            </div>
        </section>

        <!-- Registration Page -->
        <section id="register-page" class="page">
            <div class="card" style="max-width: 500px; margin: 2rem auto;">
                <h2 class="card-title">Create New Account</h2>
                <form id="register-form">
                    <div class="form-group">
                        <label for="register-name" class="form-label">Full Name</label>
                        <input type="text" id="register-name" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="register-email" class="form-label">Email</label>
                        <input type="email" id="register-email" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="register-password" class="form-label">Password</label>
                        <input type="password" id="register-password" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="register-role" class="form-label">Role</label>
                        <select id="register-role" class="form-select" required>
                            <option value="student">Student</option>
                            <option value="teacher">Teacher</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="register-track" class="form-label">Learning Track</label>
                        <select id="register-track" class="form-select" required>
                            <option value="web">Web Development</option>
                            <option value="ai">Artificial Intelligence</option>
                            <option value="cyber">Cybersecurity</option>
                            <option value="data">Data Science</option>
                            <option value="mobile">Mobile Development</option>
                            <option value="devops">DevOps</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="register-style" class="form-label">Preferred Learning Style</label>
                        <select id="register-style" class="form-select" required>
                            <option value="visual">Visual</option>
                            <option value="auditory">Auditory</option>
                            <option value="kinesthetic">Kinesthetic</option>
                            <option value="reading">Reading/Writing</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Create Account</button>
                </form>
                <p style="text-align: center; margin-top: 1rem;">
                    Already have an account? <a href="#" onclick="showPage('login')">Login</a>
                </p>
            </div>
        </section>

        <!-- Home Page -->
        <section id="home-page" class="page">
            <div class="card">
                <h2 class="card-title">Welcome to Adaptive Assessment System</h2>
                <p>This system uses reinforcement learning techniques to assess your level and provide a personalized learning experience based on your performance.</p>
                
                <div class="stats-container" style="margin-top: 2rem;">
                    <div class="card stat-card">
                        <div class="stat-value" id="ability-value">0%</div>
                        <div class="stat-label">Current Ability Level</div>
                    </div>
                    <div class="card stat-card">
                        <div class="stat-value" id="assessments-count">0</div>
                        <div class="stat-label">Completed Assessments</div>
                    </div>
                    <div class="card stat-card">
                        <div class="stat-value" id="accuracy-value">0%</div>
                        <div class="stat-label">Accuracy Rate</div>
                    </div>
                </div>
                
                <h3 style="margin: 1.5rem 0 1rem;">Your Current Track: <span id="current-track">Web Development</span></h3>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1.5rem;">
                    <div class="card track-card" onclick="startAssessment('web')">
                        <div class="track-icon">ðŸ’»</div>
                        <h3>Web Development</h3>
                        <p>HTML, CSS, JavaScript, React, Node.js</p>
                    </div>
                    <div class="card track-card" onclick="startAssessment('ai')">
                        <div class="track-icon">ðŸ¤–</div>
                        <h3>Artificial Intelligence</h3>
                        <p>Machine Learning, Deep Learning, NLP</p>
                    </div>
                    <div class="card track-card" onclick="startAssessment('cyber')">
                        <div class="track-icon">ðŸ”’</div>
                        <h3>Cybersecurity</h3>
                        <p>Network Security, Cryptography, Ethical Hacking</p>
                    </div>
                    <div class="card track-card" onclick="startAssessment('data')">
                        <div class="track-icon">ðŸ“Š</div>
                        <h3>Data Science</h3>
                        <p>Data Analysis, Visualization, Machine Learning</p>
                    </div>
                    <div class="card track-card" onclick="startAssessment('mobile')">
                        <div class="track-icon">ðŸ“±</div>
                        <h3>Mobile Development</h3>
                        <p>iOS, Android, React Native, Flutter</p>
                    </div>
                    <div class="card track-card" onclick="startAssessment('devops')">
                        <div class="track-icon">ðŸ”„</div>
                        <h3>DevOps</h3>
                        <p>CI/CD, Docker, Kubernetes, Cloud</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Assessment Page -->
        <section id="assessment-page" class="page">
            <div class="assessment-container">
                <div class="progress-container">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                        <span>Question <span id="current-question">1</span> of <span id="total-questions">10</span></span>
                        <span>Difficulty: <span id="difficulty-level">2</span></span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill" style="width: 10%;"></div>
                    </div>
                </div>
                
                <!-- Adaptive indicator -->
                <div class="adaptive-indicator">
                    <span>Adaptation Strategy:</span>
                    <span class="adaptive-badge" id="adaptation-strategy">Reinforcement Learning</span>
                    <span style="margin-right: auto;">Model Confidence:</span>
                    <span id="model-confidence">75%</span>
                </div>
                
                <div class="card question-card">
                    <h3 class="question-text" id="question-text">Loading question...</h3>
                    <ul class="options-list" id="options-list">
                        <!-- Options will be populated dynamically -->
                    </ul>
                </div>
                
                <!-- Agent feedback -->
                <div class="agent-feedback" id="agent-feedback">
                    <strong>System Feedback:</strong>
                    <span id="feedback-text">Analyzing your performance to determine next question...</span>
                </div>
                
                <div style="display: flex; justify-content: space-between; margin-top: 1.5rem;">
                    <button class="btn btn-danger" onclick="cancelAssessment()">Cancel Assessment</button>
                    <button class="btn btn-primary" id="next-button" onclick="submitAnswer()" disabled>Submit Answer</button>
                </div>
            </div>
        </section>

        <!-- Results Page -->
        <section id="results-page" class="page">
            <div class="assessment-container">
                <div class="card">
                    <h2 class="card-title" style="text-align: center;">Assessment Results</h2>
                    
                    <div class="stats-container">
                        <div class="card stat-card">
                            <div class="stat-value" id="result-score">0/0</div>
                            <div class="stat-label">Correct Answers</div>
                        </div>
                        <div class="card stat-card">
                            <div class="stat-value" id="result-ability">0%</div>
                            <div class="stat-label">Final Ability Level</div>
                        </div>
                        <div class="card stat-card">
                            <div class="stat-value" id="result-confidence">0%</div>
                            <div class="stat-label">Confidence Level</div>
                        </div>
                        <div class="card stat-card">
                            <div class="stat-value" id="result-level">0</div>
                            <div class="stat-label">Recommended Level</div>
                        </div>
                    </div>
                    
                    <h3 style="margin: 1.5rem 0 1rem;">Performance Analysis by Level</h3>
                    <div id="level-performance">
                        <!-- Performance analysis will be populated dynamically -->
                    </div>
                    
                    <!-- Agent analysis -->
                    <h3 style="margin: 1.5rem 0 1rem;">Reinforcement Learning System Analysis</h3>
                    <div class="agent-feedback">
                        <strong>Agent Performance Summary:</strong>
                        <div id="agent-analysis">
                            <p>Analyzing assessment data...</p>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 2rem;">
                        <button class="btn btn-primary" onclick="showPage('home')">Back to Home</button>
                        <button class="btn btn-success" onclick="viewRecommendations()">View Recommendations</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- History Page -->
        <section id="history-page" class="page">
            <div class="card">
                <h2 class="card-title">Assessment History</h2>
                
                <div class="table-responsive">
                    <table class="history-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Track</th>
                                <th>Score</th>
                                <th>Ability Level</th>
                                <th>Recommended Level</th>
                                <th>Adaptation Strategy</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="history-table-body">
                            <!-- Assessment history will be populated dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div id="no-history" style="text-align: center; padding: 2rem; display: none;">
                    <p>No previous assessments found.</p>
                    <button class="btn btn-primary" onclick="showPage('assessment')">Start First Assessment</button>
                </div>
            </div>
        </section>

        <!-- Recommendations Page -->
        <section id="recommendations-page" class="page">
            <div class="card">
                <h2 class="card-title">Adaptive Learning Recommendations</h2>
                
                <div class="stats-container">
                    <div class="card stat-card">
                        <div class="stat-value" id="rec-ability">0%</div>
                        <div class="stat-label">Current Ability Level</div>
                    </div>
                    <div class="card stat-card">
                        <div class="stat-value" id="rec-difficulty">1</div>
                        <div class="stat-label">Recommended Difficulty</div>
                    </div>
                    <div class="card stat-card">
                        <div class="stat-value" id="rec-time">0 hours</div>
                        <div class="stat-label">Estimated Time to Master</div>
                    </div>
                </div>
                
                <h3 style="margin: 1.5rem 0 1rem;">Recommended Lessons</h3>
                <div id="recommended-lessons">
                    <!-- Recommended lessons will be populated dynamically -->
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-top: 1.5rem;">
                    <div>
                        <h3 style="margin-bottom: 1rem;">Strengths</h3>
                        <div id="strengths-list">
                            <!-- Strengths will be populated dynamically -->
                        </div>
                    </div>
                    <div>
                        <h3 style="margin-bottom: 1rem;">Weaknesses</h3>
                        <div id="weaknesses-list">
                            <!-- Weaknesses will be populated dynamically -->
                        </div>
                    </div>
                </div>
                
                <!-- Agent recommendations -->
                <h3 style="margin: 1.5rem 0 1rem;">Reinforcement Learning Recommendations</h3>
                <div class="agent-feedback">
                    <div id="rl-recommendations">
                        <p>Generating personalized recommendations based on your performance...</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // Global variables
        let currentUser = null;
        let currentSession = null;
        let currentQuestion = null;
        let selectedOption = null;
        let adaptationStrategy = "rl_based";
        let questionNumber = 1;
        let correctAnswers = 0;
        
        // DOM elements
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        
        // Form event handlers
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            try {
                // Simulate login (in a real app, this would communicate with a server)
                const mockUser = {
                    id: 'user_' + Date.now(),
                    name: 'Demo User',
                    email: email,
                    role: 'student',
                    learningProfile: {
                        currentAbility: 0.5,
                        track: 'web',
                        assessmentHistory: []
                    }
                };
                
                currentUser = mockUser;
                localStorage.setItem('currentUser', JSON.stringify(mockUser));
                showPage('home');
                loadUserData();
                
            } catch (error) {
                console.error('Login error:', error);
                alert('Error during login');
            }
        });
        
        registerForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const role = document.getElementById('register-role').value;
            const track = document.getElementById('register-track').value;
            const preferredLearningStyle = document.getElementById('register-style').value;
            
            try {
                // Simulate registration (in a real app, this would communicate with a server)
                const mockUser = {
                    id: 'user_' + Date.now(),
                    name: name,
                    email: email,
                    role: role,
                    learningProfile: {
                        preferredLearningStyle: preferredLearningStyle,
                        track: track,
                        currentAbility: 0.5,
                        assessmentHistory: []
                    }
                };
                
                currentUser = mockUser;
                localStorage.setItem('currentUser', JSON.stringify(mockUser));
                alert('Account created successfully, please login');
                showPage('login');
            } catch (error) {
                console.error('Registration error:', error);
                alert('Error during registration');
            }
        });
        
        // Page navigation functions
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active-page');
            });
            
            // Show the requested page
            document.getElementById(`${pageId}-page`).classList.add('active-page');
            
            // Load data when needed
            if (pageId === 'home' && currentUser) {
                loadUserData();
            } else if (pageId === 'history' && currentUser) {
                loadAssessmentHistory();
            } else if (pageId === 'recommendations' && currentUser) {
                loadRecommendations();
            }
        }
        
        // Load user data
        async function loadUserData() {
            try {
                if (!currentUser) {
                    const savedUser = localStorage.getItem('currentUser');
                    if (savedUser) {
                        currentUser = JSON.parse(savedUser);
                    }
                }
                
                if (currentUser) {
                    // Update statistics
                    document.getElementById('ability-value').textContent = 
                        `${(currentUser.learningProfile.currentAbility * 100).toFixed(1)}%`;
                    document.getElementById('assessments-count').textContent = 
                        currentUser.learningProfile.assessmentHistory.length;
                    document.getElementById('accuracy-value').textContent = 
                        currentUser.learningProfile.assessmentHistory.length > 0 ? 
                        `${(currentUser.learningProfile.currentAbility * 100).toFixed(1)}%` : '0%';
                    document.getElementById('current-track').textContent = 
                        getTrackName(currentUser.learningProfile.track);
                }
            } catch (error) {
                console.error('Error loading user data:', error);
            }
        }
        
        // Start assessment
        async function startAssessment(track) {
            try {
                // Reset assessment state
                questionNumber = 1;
                correctAnswers = 0;
                
                // Simulate starting assessment
                currentSession = 'session_' + Date.now();
                
                // Set adaptation strategy based on track
                adaptationStrategy = track === 'ai' ? 'rl_advanced' : 'rl_based';
                document.getElementById('adaptation-strategy').textContent = 
                    adaptationStrategy === 'rl_advanced' ? 'Advanced RL' : 'Reinforcement Learning';
                
                // Get the first question
                const firstQuestion = await getNextQuestion(currentUser.learningProfile.currentAbility, 2, track);
                firstQuestion.number = questionNumber;
                
                showPage('assessment');
                loadQuestion(firstQuestion);
            } catch (error) {
                console.error('Error starting assessment:', error);
                alert('Error starting assessment');
            }
        }
        
        // Simulate getting next question from the system
        async function getNextQuestion(ability, currentLevel, track) {
            // Simulate connection to reinforcement learning system
            const difficulty = calculateDifficulty(ability, currentLevel);
            const question = generateAdaptiveQuestion(difficulty, track);
            
            // Update confidence indicator
            const confidence = 70 + Math.random() * 25; // Confidence between 70% and 95%
            document.getElementById('model-confidence').textContent = `${confidence.toFixed(0)}%`;
            
            return question;
        }
        
        // Calculate difficulty based on ability and current level
        function calculateDifficulty(ability, currentLevel) {
            // Simple adaptive algorithm
            if (ability > 0.7) return Math.min(3, currentLevel + 1);
            if (ability < 0.3) return Math.max(1, currentLevel - 1);
            return currentLevel;
        }
        
        // Generate adaptive question
        function generateAdaptiveQuestion(level, track) {
            // Enhanced question pools with more variety for each track
            const questions = {
                web: {
                    1: [
                        {
                            id: 'web_1_1',
                            text: "Which language is the core of web page structure?",
                            options: ["HTML", "Python", "Java", "C++"],
                            correct_answer: "HTML",
                            explanation: "HTML (HyperText Markup Language) defines the structure and content of web pages."
                        },
                        {
                            id: 'web_1_2',
                            text: "What does CSS stand for?",
                            options: ["Computer Style Sheets", "Creative Style Sheets", 
                                    "Cascading Style Sheets", "Colorful Style Sheets"],
                            correct_answer: "Cascading Style Sheets",
                            explanation: "CSS controls the visual styling and layout of web pages."
                        },
                        {
                            id: 'web_1_3',
                            text: "Which HTML tag is used for paragraphs?",
                            options: ["<p>", "<para>", "<paragraph>", "<pg>"],
                            correct_answer: "<p>",
                            explanation: "The <p> tag defines a paragraph in HTML."
                        }
                    ],
                    2: [
                        {
                            id: 'web_2_1',
                            text: "Which React hook is used for side effects?",
                            options: ["useState", "useEffect", "useContext", "useReducer"],
                            correct_answer: "useEffect",
                            explanation: "useEffect handles side effects like API calls and subscriptions."
                        },
                        {
                            id: 'web_2_2',
                            text: "What does API stand for?",
                            options: ["Application Programming Interface", "Automated Programming Interface",
                                    "Advanced Programming Instruction", "Application Process Integration"],
                            correct_answer: "Application Programming Interface",
                            explanation: "APIs allow different software applications to communicate."
                        }
                    ],
                    3: [
                        {
                            id: 'web_3_1',
                            text: "What is the purpose of Webpack?",
                            options: ["Module bundling and optimization", "Database management",
                                    "User authentication", "Email services"],
                            correct_answer: "Module bundling and optimization",
                            explanation: "Webpack bundles JavaScript modules and optimizes assets for production."
                        },
                        {
                            id: 'web_3_2',
                            text: "Which HTTP status code indicates 'Not Found'?",
                            options: ["200", "301", "404", "500"],
                            correct_answer: "404",
                            explanation: "404 indicates that the requested resource was not found on the server."
                        }
                    ]
                },
                ai: {
                    1: [
                        {
                            id: 'ai_1_1',
                            text: "What is the most common programming language for AI?",
                            options: ["Python", "C#", "Ruby", "Go"],
                            correct_answer: "Python",
                            explanation: "Python is widely used in AI due to its simplicity and extensive libraries."
                        },
                        {
                            id: 'ai_1_2',
                            text: "What does AI stand for?",
                            options: ["Automated Intelligence", "Artificial Intelligence",
                                    "Advanced Interface", "Algorithmic Inference"],
                            correct_answer: "Artificial Intelligence",
                            explanation: "AI refers to machines that can perform tasks typically requiring human intelligence."
                        }
                    ],
                    2: [
                        {
                            id: 'ai_2_1',
                            text: "What is machine learning?",
                            options: ["Teaching machines to learn from data", "Programming robots",
                                    "Creating websites", "Database management"],
                            correct_answer: "Teaching machines to learn from data",
                            explanation: "Machine learning enables computers to learn and improve from experience without explicit programming."
                        },
                        {
                            id: 'ai_2_2',
                            text: "Which algorithm is best for classification tasks?",
                            options: ["Linear Regression", "K-Means", "Decision Tree", "DBSCAN"],
                            correct_answer: "Decision Tree",
                            explanation: "Decision Trees are excellent for classification problems due to their interpretability."
                        }
                    ],
                    3: [
                        {
                            id: 'ai_3_1',
                            text: "What does CNN stand for in deep learning?",
                            options: ["Common Neural Network", "Convolutional Neural Network",
                                    "Complex Neural Node", "Centralized Neural Network"],
                            correct_answer: "Convolutional Neural Network",
                            explanation: "CNNs are specialized for processing grid-like data such as images."
                        },
                        {
                            id: 'ai_3_2',
                            text: "What is transfer learning?",
                            options: ["Reusing a pre-trained model for new tasks", "Moving data between servers",
                                    "Changing programming languages", "Converting code to binary"],
                            correct_answer: "Reusing a pre-trained model for new tasks",
                            explanation: "Transfer learning leverages knowledge from pre-trained models for related tasks."
                        }
                    ]
                },
                cyber: {
                    1: [
                        {
                            id: 'cyber_1_1',
                            text: "What is the most common type of cyber attack?",
                            options: ["Phishing", "DDoS", "MITM", "Zero-day"],
                            correct_answer: "Phishing",
                            explanation: "Phishing attacks trick users into revealing sensitive information through fake communications."
                        },
                        {
                            id: 'cyber_1_2',
                            text: "What is a firewall used for?",
                            options: ["Network security", "Data storage", "Website design", "Programming"],
                            correct_answer: "Network security",
                            explanation: "Firewalls monitor and control incoming and outgoing network traffic."
                        }
                    ],
                    2: [
                        {
                            id: 'cyber_2_1',
                            text: "What does VPN stand for?",
                            options: ["Virtual Private Network", "Verified Personal Node",
                                    "Virtual Public Network", "Verified Protocol Network"],
                            correct_answer: "Virtual Private Network",
                            explanation: "VPNs create secure connections over public networks."
                        },
                        {
                            id: 'cyber_2_2',
                            text: "What is two-factor authentication?",
                            options: ["An extra security layer requiring two forms of verification", "A type of virus",
                                    "A network protocol", "A programming language"],
                            correct_answer: "An extra security layer requiring two forms of verification",
                            explanation: "2FA adds security by requiring something you know and something you have."
                        }
                    ],
                    3: [
                        {
                            id: 'cyber_3_1',
                            text: "Which encryption algorithm is asymmetric?",
                            options: ["AES", "RSA", "DES", "3DES"],
                            correct_answer: "RSA",
                            explanation: "RSA uses different keys for encryption and decryption (public/private key pairs)."
                        },
                        {
                            id: 'cyber_3_2',
                            text: "What is a zero-day vulnerability?",
                            options: ["A security flaw unknown to vendors", "A type of firewall",
                                    "An encryption method", "A network protocol"],
                            correct_answer: "A security flaw unknown to vendors",
                            explanation: "Zero-day vulnerabilities are unknown to security vendors and have no available patches."
                        }
                    ]
                },
                data: {
                    1: [
                        {
                            id: 'data_1_1',
                            text: "What is the primary tool for data analysis in Python?",
                            options: ["Pandas", "Django", "TensorFlow", "Flask"],
                            correct_answer: "Pandas",
                            explanation: "Pandas provides data structures and analysis tools for Python."
                        },
                        {
                            id: 'data_1_2',
                            text: "What is a DataFrame?",
                            options: ["2D data structure", "A chart type", "A database", "A file format"],
                            correct_answer: "2D data structure",
                            explanation: "DataFrame is a 2D labeled data structure similar to a spreadsheet."
                        }
                    ],
                    2: [
                        {
                            id: 'data_2_1',
                            text: "Which type of variable is 'age'?",
                            options: ["Categorical", "Numerical", "Ordinal", "Binary"],
                            correct_answer: "Numerical",
                            explanation: "Age is a numerical (quantitative) variable that can be measured."
                        },
                        {
                            id: 'data_2_2',
                            text: "What is data cleaning?",
                            options: ["Fixing errors and inconsistencies in data", "Deleting old data",
                                    "Encrypting data", "Visualizing data"],
                            correct_answer: "Fixing errors and inconsistencies in data",
                            explanation: "Data cleaning involves identifying and correcting errors in datasets."
                        }
                    ],
                    3: [
                        {
                            id: 'data_3_1',
                            text: "What does EDA stand for in data science?",
                            options: ["Electronic Data Analysis", "Exploratory Data Analysis",
                                    "Estimated Data Assessment", "Extended Data Algorithm"],
                            correct_answer: "Exploratory Data Analysis",
                            explanation: "EDA is the process of analyzing datasets to summarize their main characteristics."
                        },
                        {
                            id: 'data_3_2',
                            text: "What is feature engineering?",
                            options: ["Creating better input features for models", "Building UI features",
                                    "Designing databases", "Writing documentation"],
                            correct_answer: "Creating better input features for models",
                            explanation: "Feature engineering involves creating new features from existing data to improve model performance."
                        }
                    ]
                },
                mobile: {
                    1: [
                        {
                            id: 'mobile_1_1',
                            text: "Which language is used for native Android development?",
                            options: ["Swift", "Kotlin", "C#", "JavaScript"],
                            correct_answer: "Kotlin",
                            explanation: "Kotlin is Google's preferred language for Android development."
                        },
                        {
                            id: 'mobile_1_2',
                            text: "What is Flutter used for?",
                            options: ["Cross-platform mobile apps", "Web development",
                                    "Game development", "Data analysis"],
                            correct_answer: "Cross-platform mobile apps",
                            explanation: "Flutter allows building apps for multiple platforms from a single codebase."
                        }
                    ],
                    2: [
                        {
                            id: 'mobile_2_1',
                            text: "What is React Native used for?",
                            options: ["Cross-platform mobile development", "Web development only",
                                    "Game development", "Data analysis"],
                            correct_answer: "Cross-platform mobile development",
                            explanation: "React Native uses JavaScript to build native mobile apps for multiple platforms."
                        },
                        {
                            id: 'mobile_2_2',
                            text: "What is an APK file?",
                            options: ["Android application package", "Apple program kit",
                                    "Application programming key", "Automated process kernel"],
                            correct_answer: "Android application package",
                            explanation: "APK files are the package format for Android applications."
                        }
                    ],
                    3: [
                        {
                            id: 'mobile_3_1',
                            text: "Which architecture pattern is recommended for Android apps?",
                            options: ["MVVM", "Singleton", "Factory", "Observer"],
                            correct_answer: "MVVM",
                            explanation: "MVVM (Model-View-ViewModel) separates UI logic from business logic in Android apps."
                        },
                        {
                            id: 'mobile_3_2',
                            text: "What is Firebase commonly used for in mobile apps?",
                            options: ["Backend services and cloud infrastructure", "UI design",
                                    "Game engines", "Local storage only"],
                            correct_answer: "Backend services and cloud infrastructure",
                            explanation: "Firebase provides authentication, databases, hosting, and other backend services."
                        }
                    ]
                },
                devops: {
                    1: [
                        {
                            id: 'devops_1_1',
                            text: "What is Docker used for?",
                            options: ["Containerization", "Database management", "Web design", "Mobile development"],
                            correct_answer: "Containerization",
                            explanation: "Docker packages applications and their dependencies into lightweight containers."
                        },
                        {
                            id: 'devops_1_2',
                            text: "What does CI/CD stand for?",
                            options: ["Continuous Integration/Continuous Deployment", "Computer Integration/Computer Deployment",
                                    "Code Integration/Code Deployment", "Continuous Internet/Continuous Data"],
                            correct_answer: "Continuous Integration/Continuous Deployment",
                            explanation: "CI/CD automates the process of integrating code changes and deploying applications."
                        }
                    ],
                    2: [
                        {
                            id: 'devops_2_1',
                            text: "What is Infrastructure as Code (IaC)?",
                            options: ["Managing infrastructure through code", "Writing application code",
                                    "Database programming", "Web development"],
                            correct_answer: "Managing infrastructure through code",
                            explanation: "IaC uses code to provision and manage infrastructure resources automatically."
                        },
                        {
                            id: 'devops_2_2',
                            text: "Which tool is commonly used for configuration management?",
                            options: ["Ansible", "Photoshop", "Word", "Excel"],
                            correct_answer: "Ansible",
                            explanation: "Ansible automates configuration management and application deployment."
                        }
                    ],
                    3: [
                        {
                            id: 'devops_3_1',
                            text: "What is Kubernetes used for?",
                            options: ["Container orchestration", "Database management",
                                    "Web design", "Mobile development"],
                            correct_answer: "Container orchestration",
                            explanation: "Kubernetes automates deployment, scaling, and management of containerized applications."
                        },
                        {
                            id: 'devops_3_2',
                            text: "What is the difference between horizontal and vertical scaling?",
                            options: ["Horizontal adds more machines, vertical adds more power",
                                    "No difference", "Vertical is always better", "Horizontal is cheaper"],
                            correct_answer: "Horizontal adds more machines, vertical adds more power",
                            explanation: "Horizontal scaling adds more servers; vertical scaling increases the power of existing servers."
                        }
                    ]
                }
            };
            
            // Select a random question from the specified level and track
            if (questions[track] && questions[track][level]) {
                const trackQuestions = questions[track][level];
                return trackQuestions[Math.floor(Math.random() * trackQuestions.length)];
            }
            
            // Default question if no questions found for the level/track
            return {
                id: 'default_question',
                text: "What is the most commonly used programming language in web development?",
                options: ["JavaScript", "Python", "Java", "C++"],
                correct_answer: "JavaScript",
                explanation: "JavaScript is the most used language in web development, especially for browser interaction.",
                level: level,
                track: track
            };
        }
        
        // Load question
        function loadQuestion(questionData) {
            currentQuestion = questionData;
            
            document.getElementById('question-text').textContent = questionData.text;
            
            // Update difficulty indicator
            const difficultyText = {1: "Easy", 2: "Medium", 3: "Hard"}[questionData.level] || questionData.level;
            document.getElementById('difficulty-level').textContent = difficultyText;
            
            // Add CSS class for difficulty level
            const difficultyElement = document.getElementById('difficulty-level');
            difficultyElement.className = '';
            if (questionData.level === 1) difficultyElement.classList.add('badge-easy');
            else if (questionData.level === 2) difficultyElement.classList.add('badge-medium');
            else if (questionData.level === 3) difficultyElement.classList.add('badge-hard');
            
            const optionsList = document.getElementById('options-list');
            optionsList.innerHTML = '';
            
            questionData.options.forEach((option, index) => {
                const li = document.createElement('li');
                li.className = 'option-item';
                li.textContent = option;
                li.onclick = () => selectOption(index, li);
                optionsList.appendChild(li);
            });
            
            // Update progress bar
            const progress = (questionNumber / 10) * 100;
            document.getElementById('progress-fill').style.width = `${progress}%`;
            document.getElementById('current-question').textContent = questionNumber;
            document.getElementById('total-questions').textContent = 10;
            
            // Disable submit button until an answer is selected
            document.getElementById('next-button').disabled = true;
            selectedOption = null;
            
            // Update agent feedback
            updateAgentFeedback(questionData.level);
        }
        
        // Update reinforcement learning system feedback
        function updateAgentFeedback(level) {
            const feedbackElement = document.getElementById('feedback-text');
            const feedbacks = {
                1: "This question is suitable for beginners. It will help us assess your fundamentals.",
                2: "This is a medium-level question. We'll evaluate your understanding of intermediate concepts.",
                3: "This is an advanced question. Designed to challenge your deep understanding of the topic."
            };
            
            feedbackElement.textContent = feedbacks[level] || "Analyzing your performance to determine the next appropriate question.";
        }
        
        // Select answer option
        function selectOption(index, element) {
            // Deselect all options
            document.querySelectorAll('.option-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            // Select current option
            element.classList.add('selected');
            selectedOption = index;
            
            // Enable submit button
            document.getElementById('next-button').disabled = false;
        }
        
        // Submit answer
        async function submitAnswer() {
            if (selectedOption === null) return;
            
            try {
                const selectedAnswer = currentQuestion.options[selectedOption];
                const isCorrect = selectedAnswer === currentQuestion.correct_answer;
                
                if (isCorrect) {
                    correctAnswers++;
                }
                
                // Update student ability based on answer
                const abilityChange = isCorrect ? 0.05 : -0.05;
                currentUser.learningProfile.currentAbility = Math.max(0.1, Math.min(0.99, 
                    currentUser.learningProfile.currentAbility + abilityChange));
                
                // Get next question
                questionNumber++;
                
                if (questionNumber > 10) {
                    // Complete assessment after 10 questions
                    completeAssessment();
                } else {
                    // Get next question
                    const nextLevel = calculateDifficulty(currentUser.learningProfile.currentAbility, currentQuestion.level);
                    const nextQuestion = await getNextQuestion(currentUser.learningProfile.currentAbility, nextLevel, currentUser.learningProfile.track);
                    nextQuestion.number = questionNumber;
                    
                    // Load next question
                    loadQuestion(nextQuestion);
                }
                
            } catch (error) {
                console.error('Error submitting answer:', error);
                alert('Error submitting answer');
            }
        }
        
        // Complete assessment and show results
        function completeAssessment() {
            // Save assessment session
            const assessmentResult = {
                sessionId: currentSession,
                track: currentUser.learningProfile.track,
                date: new Date(),
                totalQuestions: 10,
                correctAnswers: correctAnswers,
                finalAbility: currentUser.learningProfile.currentAbility,
                confidenceScore: 0.8,
                recommendedLevel: Math.ceil(currentUser.learningProfile.currentAbility * 3)
            };
            
            currentUser.learningProfile.assessmentHistory.push(assessmentResult);
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            // Show results
            showResults(assessmentResult);
        }
        
        // Cancel assessment
        function cancelAssessment() {
            if (confirm('Are you sure you want to cancel the assessment? Your current progress will be lost.')) {
                showPage('home');
            }
        }
        
        // Show results
        function showResults(summary) {
            document.getElementById('result-score').textContent = 
                `${summary.correctAnswers}/${summary.totalQuestions}`;
            document.getElementById('result-ability').textContent = 
                `${(summary.finalAbility * 100).toFixed(1)}%`;
            document.getElementById('result-confidence').textContent = 
                `${(summary.confidenceScore * 100).toFixed(1)}%`;
            document.getElementById('result-level').textContent = summary.recommendedLevel;
            
            // Show performance analysis by level
            const levelPerformance = document.getElementById('level-performance');
            levelPerformance.innerHTML = '';
            
            for (let level = 1; level <= 3; level++) {
                const questionsInLevel = Math.round(10 / 3);
                const correctInLevel = Math.round(summary.correctAnswers / 3);
                
                const div = document.createElement('div');
                div.className = 'recommendation-card';
                div.innerHTML = `
                    <h4>Level ${level}</h4>
                    <p>Accuracy: ${(correctInLevel / questionsInLevel * 100).toFixed(1)}%</p>
                    <p>Questions: ${questionsInLevel}</p>
                `;
                levelPerformance.appendChild(div);
            }
            
            // Show agent analysis
            const agentAnalysis = document.getElementById('agent-analysis');
            agentAnalysis.innerHTML = `
                <p>The system used <strong>${adaptationStrategy === 'rl_advanced' ? 'advanced reinforcement learning' : 'reinforcement learning'}</strong> strategy</p>
                <p>Question difficulty was adjusted in real-time based on your performance.</p>
                <p>Final ability level: <strong>${(summary.finalAbility * 100).toFixed(1)}%</strong></p>
                <p>We recommend starting with level <strong>${summary.recommendedLevel}</strong> in your next assessment.</p>
            `;
            
            showPage('results');
        }
        
        // Load assessment history
        async function loadAssessmentHistory() {
            try {
                if (!currentUser) {
                    const savedUser = localStorage.getItem('currentUser');
                    if (savedUser) {
                        currentUser = JSON.parse(savedUser);
                    }
                }
                
                const tbody = document.getElementById('history-table-body');
                tbody.innerHTML = '';
                
                if (!currentUser || !currentUser.learningProfile.assessmentHistory || 
                    currentUser.learningProfile.assessmentHistory.length === 0) {
                    document.getElementById('no-history').style.display = 'block';
                    return;
                }
                
                document.getElementById('no-history').style.display = 'none';
                
                currentUser.learningProfile.assessmentHistory.forEach(assessment => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${new Date(assessment.date).toLocaleDateString()}</td>
                        <td>${getTrackName(assessment.track)}</td>
                        <td>${assessment.correctAnswers}/${assessment.totalQuestions}</td>
                        <td>${(assessment.finalAbility * 100).toFixed(1)}%</td>
                        <td>${assessment.recommendedLevel}</td>
                        <td>${assessment.track === 'ai' ? 'Advanced RL' : 'Reinforcement Learning'}</td>
                        <td>
                            <button class="btn btn-primary" onclick="viewAssessmentDetails('${assessment.sessionId}')">Details</button>
                        </td>
                    `;
                    tbody.appendChild(tr);
                });
            } catch (error) {
                console.error('Error loading assessment history:', error);
            }
        }
        
        // Load recommendations
        async function loadRecommendations() {
            try {
                if (!currentUser) {
                    const savedUser = localStorage.getItem('currentUser');
                    if (savedUser) {
                        currentUser = JSON.parse(savedUser);
                    }
                }
                
                if (currentUser) {
                    document.getElementById('rec-ability').textContent = 
                        `${(currentUser.learningProfile.currentAbility * 100).toFixed(1)}%`;
                    document.getElementById('rec-difficulty').textContent = 
                        Math.ceil(currentUser.learningProfile.currentAbility * 3);
                    document.getElementById('rec-time').textContent = 
                        `${Math.round((1 - currentUser.learningProfile.currentAbility) * 20)} hours`;
                    
                    // Show recommended lessons
                    const lessonsContainer = document.getElementById('recommended-lessons');
                    lessonsContainer.innerHTML = '';
                    
                    const recommendedLessons = generateRecommendedLessons(
                        currentUser.learningProfile.track, 
                        currentUser.learningProfile.currentAbility
                    );
                    
                    recommendedLessons.forEach(lesson => {
                        const div = document.createElement('div');
                        div.className = 'recommendation-card';
                        div.innerHTML = `
                            <h4>${lesson.title}</h4>
                            <p>${lesson.description}</p>
                            <p>Level: ${lesson.level} | Estimated Time: ${lesson.duration} minutes</p>
                        `;
                        lessonsContainer.appendChild(div);
                    });
                    
                    // Show strengths and weaknesses
                    const strengthsList = document.getElementById('strengths-list');
                    const weaknessesList = document.getElementById('weaknesses-list');
                    strengthsList.innerHTML = '';
                    weaknessesList.innerHTML = '';
                    
                    const { strengths, weaknesses } = generateStrengthsAndWeaknesses(
                        currentUser.learningProfile.track, 
                        currentUser.learningProfile.currentAbility
                    );
                    
                    strengths.forEach(strength => {
                        const p = document.createElement('p');
                        p.textContent = strength;
                        strengthsList.appendChild(p);
                    });
                    
                    weaknesses.forEach(weakness => {
                        const p = document.createElement('p');
                        p.textContent = weakness;
                        weaknessesList.appendChild(p);
                    });
                    
                    // Show reinforcement learning recommendations
                    const rlRecommendations = document.getElementById('rl-recommendations');
                    rlRecommendations.innerHTML = `
                        <p>Based on your performance, the reinforcement learning system suggests:</p>
                        <ul>
                            <li>Focus on ${weaknesses[0] || 'intermediate concepts'}</li>
                            <li>Practice ${Math.round((1 - currentUser.learningProfile.currentAbility) * 10)} additional exercises</li>
                            <li>Start with level ${Math.ceil(currentUser.learningProfile.currentAbility * 3)} in your next assessment</li>
                        </ul>
                    `;
                }
            } catch (error) {
                console.error('Error loading recommendations:', error);
            }
        }
        
        // Generate recommended lessons
        function generateRecommendedLessons(track, ability) {
            const lessons = {
                web: [
                    { title: "HTML Basics", description: "Learn web page structure", level: 1, duration: 30 },
                    { title: "CSS Styling", description: "Fundamentals of design and layout", level: 1, duration: 45 },
                    { title: "JavaScript Programming", description: "JavaScript fundamentals", level: 2, duration: 60 },
                    { title: "React Framework", description: "Learn React and component-based development", level: 3, duration: 90 },
                    { title: "Node.js Server Programming", description: "Build server applications", level: 3, duration: 120 }
                ],
                ai: [
                    { title: "Introduction to AI", description: "Basic concepts of artificial intelligence", level: 1, duration: 40 },
                    { title: "Python for AI", description: "Learn Python for AI applications", level: 1, duration: 50 },
                    { title: "Machine Learning Basics", description: "Introduction to ML algorithms", level: 2, duration: 70 },
                    { title: "Neural Networks", description: "Introduction to artificial neural networks", level: 3, duration: 100 },
                    { title: "Deep Learning", description: "Dive into deep learning", level: 3, duration: 120 }
                ],
                cyber: [
                    { title: "Cybersecurity Fundamentals", description: "Introduction to cybersecurity concepts", level: 1, duration: 35 },
                    { title: "Network Security", description: "Protecting networks from intrusions", level: 2, duration: 55 },
                    { title: "Ethical Hacking", description: "Ethical penetration testing", level: 2, duration: 65 },
                    { title: "Encryption and Data Security", description: "Protecting data through encryption", level: 3, duration: 85 },
                    { title: "Advanced Threat Defense", description: "Advanced protection strategies", level: 3, duration: 110 }
                ],
                data: [
                    { title: "Data Analysis with Pandas", description: "Learn data analysis with Pandas", level: 1, duration: 40 },
                    { title: "Data Visualization", description: "Creating visualizations with Matplotlib", level: 1, duration: 50 },
                    { title: "Statistical Analysis", description: "Statistical methods for data science", level: 2, duration: 70 },
                    { title: "Machine Learning for Data Science", description: "Applying ML to data analysis", level: 3, duration: 90 },
                    { title: "Big Data Technologies", description: "Working with large datasets", level: 3, duration: 120 }
                ],
                mobile: [
                    { title: "Android Development Basics", description: "Fundamentals of Android development", level: 1, duration: 40 },
                    { title: "iOS Development Basics", description: "Fundamentals of iOS development", level: 1, duration: 50 },
                    { title: "Cross-Platform Development", description: "Building apps for multiple platforms", level: 2, duration: 70 },
                    { title: "Mobile App Architecture", description: "Designing scalable mobile apps", level: 3, duration: 90 },
                    { title: "Advanced Mobile Features", description: "Implementing advanced mobile features", level: 3, duration: 120 }
                ],
                devops: [
                    { title: "Docker Containers", description: "Containerization with Docker", level: 1, duration: 40 },
                    { title: "CI/CD Pipelines", description: "Building continuous integration pipelines", level: 1, duration: 50 },
                    { title: "Kubernetes Orchestration", description: "Container orchestration with Kubernetes", level: 2, duration: 70 },
                    { title: "Infrastructure as Code", description: "Managing infrastructure with code", level: 3, duration: 90 },
                    { title: "Cloud DevOps", description: "DevOps practices in the cloud", level: 3, duration: 120 }
                ]
            };
            
            // Filter lessons based on ability level
            const recommendedLevel = Math.ceil(ability * 3);
            return lessons[track].filter(lesson => lesson.level === recommendedLevel).slice(0, 3);
        }
        
        // Generate strengths and weaknesses
        function generateStrengthsAndWeaknesses(track, ability) {
            const allStrengths = {
                web: [
                    "Good understanding of HTML structure",
                    "Strong CSS styling skills",
                    "Ability to use JavaScript for interaction",
                    "Understanding of React basics",
                    "Good knowledge of server development"
                ],
                ai: [
                    "Understanding of AI fundamentals",
                    "Strong Python skills",
                    "Ability to apply ML algorithms",
                    "Understanding of neural networks",
                    "Experience with deep learning"
                ],
                cyber: [
                    "Understanding of cybersecurity fundamentals",
                    "Good knowledge of network security",
                    "Skills in ethical hacking",
                    "Experience with data encryption",
                    "Ability to counter advanced threats"
                ],
                data: [
                    "Strong data analysis skills",
                    "Good data visualization ability",
                    "Statistical analysis proficiency",
                    "ML application skills",
                    "Experience with big data technologies"
                ],
                mobile: [
                    "Android development fundamentals",
                    "iOS development basics",
                    "Cross-platform development skills",
                    "Mobile app architecture knowledge",
                    "Advanced mobile features implementation"
                ],
                devops: [
                    "Docker container skills",
                    "CI/CD pipeline building",
                    "Kubernetes orchestration knowledge",
                    "Infrastructure as code proficiency",
                    "Cloud DevOps experience"
                ]
            };
            
            const allWeaknesses = {
                web: [
                    "Need improvement in advanced HTML",
                    "Advanced CSS needs training",
                    "Advanced JavaScript needs practice",
                    "Need to learn additional frameworks",
                    "Server programming needs deepening"
                ],
                ai: [
                    "Need to deepen AI theories",
                    "Advanced Python needs improvement",
                    "Complex ML algorithms need better understanding",
                    "Advanced neural networks need study",
                    "Deep learning needs additional practice"
                ],
                cyber: [
                    "Need to deepen security theories",
                    "Advanced network security needs study",
                    "Advanced ethical hacking needs training",
                    "Advanced data encryption needs deeper understanding",
                    "Advanced threats need better strategies"
                ],
                data: [
                    "Need improvement in advanced data analysis",
                    "Advanced visualization needs practice",
                    "Complex statistical methods need better understanding",
                    "Advanced ML applications need study",
                    "Big data technologies need additional experience"
                ],
                mobile: [
                    "Need improvement in advanced Android",
                    "Advanced iOS needs practice",
                    "Complex cross-platform development needs better understanding",
                    "Advanced architecture patterns need study",
                    "Complex mobile features need additional implementation"
                ],
                devops: [
                    "Need improvement in advanced Docker",
                    "Complex CI/CD needs practice",
                    "Advanced Kubernetes needs better understanding",
                    "Complex infrastructure as code needs study",
                    "Advanced cloud DevOps needs additional experience"
                ]
            };
            
            // Determine number of strengths and weaknesses based on ability
            const strengthCount = Math.max(1, Math.floor(ability * 3));
            const weaknessCount = Math.max(1, Math.floor((1 - ability) * 3));
            
            return {
                strengths: allStrengths[track].slice(0, strengthCount),
                weaknesses: allWeaknesses[track].slice(0, weaknessCount)
            };
        }
        
        // View assessment details
        async function viewAssessmentDetails(sessionId) {
            try {
                if (!currentUser) {
                    const savedUser = localStorage.getItem('currentUser');
                    if (savedUser) {
                        currentUser = JSON.parse(savedUser);
                    }
                }
                
                if (currentUser && currentUser.learningProfile.assessmentHistory) {
                    const assessment = currentUser.learningProfile.assessmentHistory.find(
                        a => a.sessionId === sessionId
                    );
                    
                    if (assessment) {
                        alert(`Assessment Details:\nTrack: ${getTrackName(assessment.track)}\nScore: ${assessment.correctAnswers}/${assessment.totalQuestions}\nAbility Level: ${(assessment.finalAbility * 100).toFixed(1)}%\nRecommended Level: ${assessment.recommendedLevel}`);
                    }
                }
            } catch (error) {
                console.error('Error loading assessment details:', error);
            }
        }
        
        // View recommendations from results page
        function viewRecommendations() {
            showPage('recommendations');
            loadRecommendations();
        }
        
        // Logout
        function logout() {
            currentUser = null;
            currentSession = null;
            localStorage.removeItem('currentUser');
            showPage('login');
        }
        
        // Helper functions
        function getTrackName(trackCode) {
            const tracks = {
                'web': 'Web Development',
                'ai': 'Artificial Intelligence',
                'cyber': 'Cybersecurity',
                'data': 'Data Science',
                'mobile': 'Mobile Development',
                'devops': 'DevOps'
            };
            return tracks[trackCode] || trackCode;
        }
        
        // Check for existing user on page load
        window.addEventListener('load', () => {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showPage('home');
                loadUserData();
            } else {
                showPage('login');
            }
        });
    </script>
</body>
</html>